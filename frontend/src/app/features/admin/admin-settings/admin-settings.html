<div class="admin-settings">
    <app-navbar></app-navbar>

    <div class="container">
        <h1>Global Settings</h1>

        <div *ngIf="successMessage" class="alert alert-success">
            {{ successMessage }}
            <button mat-icon-button (click)="clearMessages()">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <div *ngIf="errorMessage" class="alert alert-error">
            {{ errorMessage }}
            <button mat-icon-button (click)="clearMessages()">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <mat-card class="settings-card">
            <mat-card-header>
                <mat-card-title>Global Transfer Limit</mat-card-title>
                <mat-card-subtitle>
                    Current Limit: {{ formatCurrency(currentLimit) }}
                </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <p class="description">
                    Set the maximum amount that can be transferred in a single transaction across all accounts.
                    This limit applies globally to all users.
                </p>

                <form [formGroup]="limitForm" (ngSubmit)="onUpdateLimit()">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>New Global Limit</mat-label>
                        <input matInput type="number" formControlName="globalLimit" required>
                        <span matPrefix>$&nbsp;</span>
                        <mat-hint>Enter the new global transfer limit</mat-hint>
                    </mat-form-field>

                    <div class="form-actions">
                        <button mat-raised-button color="primary" type="submit"
                            [disabled]="loading || limitForm.invalid">
                            <mat-icon>save</mat-icon>
                            Update Limit
                        </button>
                        <button mat-button type="button" (click)="loadCurrentLimit()" [disabled]="loading">
                            <mat-icon>refresh</mat-icon>
                            Reset
                        </button>
                    </div>
                </form>
            </mat-card-content>
        </mat-card>

        <mat-card class="info-card">
            <mat-card-header>
                <mat-icon>info</mat-icon>
                <mat-card-title>Important Information</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <ul>
                    <li>The global limit affects all transfer operations immediately after being set</li>
                    <li>Individual account daily limits may be lower than the global limit</li>
                    <li>Changes to this setting are logged and auditable</li>
                    <li>Setting a limit of 0 will prevent all transfers</li>
                </ul>
            </mat-card-content>
        </mat-card>

        <div *ngIf="loading" class="loading-overlay">
            <mat-spinner></mat-spinner>
        </div>
    </div>
</div>